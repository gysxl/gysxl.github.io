<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="学习，积累，成长">
<meta property="og:type" content="website">
<meta property="og:title" content="兰小妞滴Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="兰小妞滴Blog">
<meta property="og:description" content="学习，积累，成长">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="兰小妞滴Blog">
<meta name="twitter:description" content="学习，积累，成长">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>兰小妞滴Blog</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">兰小妞滴Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/17/iOS-推送证书的创建及过期处理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/17/iOS-推送证书的创建及过期处理/" itemprop="url">iOS --推送证书的创建及过期处理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-17T11:56:23+08:00">
                Jul 17 2018
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>无论是iPhone还是android，我们用到的所有的应用基本上都是有推送通知服务的，这是应用很好的推广方式。上一章我们简单讲了下苹果的安全验证机制就可说明，苹果对这些跟用户相关的信息的把控是很严格的，push也不例外，苹果的推送需要发到苹果的服务器上中转一下，也就是我们大家熟知的苹果的推送通知服务：APNs（Apple Push Notification service),例如友盟，极光之类的推送服务都是向APNs推送消息，APNs再将消息推送给设备的，并不像安卓那样直接找到设备发送消息；苹果需要验证是否含有证书，有证书才能发送；现在我们就看看推送证书如何创建：</p>
</blockquote>
<ul>
<li>1、首先登录自己的开发账号，进入iOS Certificates证书中心，点击Certificates 下的All,这时点击右上角的“+”号增加证书，如下图:<br><img src="/images/push_1.png" alt=""></li>
<li>2、进入证书类型选择页面，这里主要有创建开发证书、发布证书、推送开发证书、推送生产证书几个类型，我的账号下的发布证书已建满，所以呈灰色，但推送证书（带Push）正常,一般推送的开发和生产证书都需要，开发证书供开发时候用，生产证书发布时用，两种后面的步骤一致，所有在这就不重复介绍，只选择一种，选择好证书类型，点击下面的Continue按钮:<br><img src="/images/push_2.png" alt=""></li>
<li>3、选择需要创建推送证书的应用的APP ID，点击continue：<br><img src="/images/push_3.png" alt=""></li>
<li>4、进入Create a CSR file 页面，直接Continue:<br><img src="/images/push_4.png" alt=""></li>
<li>5、这时会让你选择CSR file，但是CSR file我们暂时还未创建，所以我们得先创建CSR file，再进行下一步：<br><img src="/images/push_5.png" alt=""></li>
<li>6、在Mac电脑上打开钥匙串访问:<br><img src="/images/push_6.png" alt="">  </li>
<li>7、点击菜单中的钥匙串访问—&gt;证书助理—&gt;从证书颁发机构请求证书…，进入证书助理页面，选择存储到磁盘，电子邮件随便填，点击继续：<br><img src="/images/push_7.png" alt="">   </li>
<li>8、这时就创建好了CSR file文件了，桌面出现如下图标：<br><img src="/images/push_8.png" alt="">  </li>
<li>9、接下来回到第五步，选择刚创建好的CSR file，点击continue：<br><img src="/images/push_9.png" alt=""></li>
<li>10、这时证书已经创建好了，回到iOS Certificates证书中心页面，我们就可以看到我们创建的证书，后面还有到期时间：<br><img src="/images/push_10.png" alt=""></li>
<li>11、我们已经创建好证书了，接下来就是安装证书了，点击Download下载，双击证书，注意一定要双击，开发、生产证书都是一样的，这样推送证书就安装好了，可以去钥匙串看到：<br><img src="/images/push_11.png" alt=""></li>
<li>12、我们已经创建了证书也已经安装好了证书，但是我们集成的一些第三方平台，如极光推送，还需要我们上传证书到它们平台，但它们要的证书并不是我们之前创建的，而是需要.p12文件的证书，这就需要我们从钥匙串导出.p12格式，生产、开发都需要，操作如下：<br><img src="/images/push_12.png" alt=""></li>
<li>13、一般情况下，将上面到处的证书上传到第三方平台就可以，上传成功后会提示已验证，这时就可以集成SDK，发送PUSH了。<br>有人注意到推送证书有时间期限的，是的，是有有效期，有时我们应用突然接不到消息了，有可能就是证书过期了，有效期一般为1年左右，那有效期快过了怎么处理呢？<br>解决方案:</li>
</ul>
<p>1、删除MAC上钥匙串访问中对应的推送证书<br>2、去开发者中心删掉过期推送证书，重新按着上面的步骤重新来一遍<br>3、在第三方平台上重新上传新的.p12证书</p>
<p>已上线的应用也是一样，删掉证书不会影响推送，只要对应的APP ID是一样的！</p>
<p>链接：<a href="https://www.jianshu.com/p/ca8df77ee18e" target="_blank" rel="external">https://www.jianshu.com/p/ca8df77ee18e</a><br>來源：简书</p>

          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/07/17/iOS-推送证书的创建及过期处理/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/07/Xcode无线真机调试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/07/Xcode无线真机调试/" itemprop="url">Xcode无线真机调试</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-07T14:06:07+08:00">
                May 7 2018
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>一般情况下Xcode调试肯定是数据线链接真机比较稳妥，但是作为一枚好说话的客户端测开，有时真有一种把客户端RD宠成baby的节奏。每天上班都会发现数据线不翼而飞，RD总有一种吃数据线的本领，导致经常遇到没有数据线调试的尴尬场景；And偶尔回家没事想自己研究点东西的时候，就经常需要运行个demo什么的到手机上，又几乎从来不会带转接头这种东西回家。。。。。所以只能尝试无线真机调试，所以才有了此文，比较简单，作为笔记记录一下。</p>
</blockquote>
<h2 id="环境依赖"><a href="#环境依赖" class="headerlink" title="环境依赖"></a>环境依赖</h2><p>无线调试是WWDC2017的新功能，iOS11以上，Xcode9这是刚性要求。</p>
<ul>
<li>至少Mac OSX 10.12.6</li>
<li>iOS 11</li>
<li>Xcode 9</li>
</ul>
<h2 id="使用无线进行设备链接"><a href="#使用无线进行设备链接" class="headerlink" title="使用无线进行设备链接"></a>使用无线进行设备链接</h2><ul>
<li>手机连接上Xcode，打开Xcode菜单：Windows-&gt;Device and Simulators。找到连接上的设备，把Connect via network选项打勾。<br><img src="/images/xcode_2.png" alt=""></li>
<li>此时，拔掉数据线，在Xcode选择打包设备时即可发现刚刚被拔掉数据线的设备。但是设备链接出显示该设备处于“Disconnected”状态，且一直loading。  </li>
<li>回到刚刚的设备列表中，选中手机右键，在出来的选项卡中选择一个“Connect via IP Address”项。选择之后输入手机的局域网ip地址。<br><img src="/images/xcode_3.png" alt=""></li>
<li>连接完成后可以看到在连接的手机右边有一个地球连接标志，长这样<br><img src="/images/xcode_1.png" alt=""></li>
<li>完成后可以看到在连接的手机邮编出现一个地球连接标记，如下图所示：<br><img src="/images/xcode_4.png" alt=""><br>完成上述操作后就能脱离数据线的束缚了，后续在编译选择设备时，可直接选择该设备进行编译。</li>
</ul>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>楼主第一次成功后，想重新连接截图记录一下，所以删了想重来，就死也连接不上了，各种找资料无果，最后是重启了Mac搞定的，遇到同样问题的小伙伴可以尝试重启。</p>

          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/05/07/Xcode无线真机调试/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/02/如何发布一个iOS全新APP-从证书管理到Jenkins任务上的archive打包上传/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/02/如何发布一个iOS全新APP-从证书管理到Jenkins任务上的archive打包上传/" itemprop="url">如何发布一个iOS全新APP--从证书管理到Jenkins任务上的archive打包上传</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-02T21:24:27+08:00">
                May 2 2018
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>楼主之前在的公司是有专门的EP部门管理iOS客户端的证书、打包、上传什么的一堆逻辑，这块东西基本上对楼主来说是黑盒的。去年跳槽到新的公司后，发现这边的部门间都是独立管理自己的所有事情，不存在一个类似于全公司的EP的部门存在，而且楼主去的是个新成立的部门，就遇到了几乎是从0到1的全新APP的上架问题，头疼的搞了差不多一周多，最终是整了一套完整的证书与打包机制，但是当时一直没有搞懂里面的一些校验机制与推送机制，所以一直没敢出文记录，直到前几天收到PUSH证书快到期的提示，被迫硬着头皮搞了一遍PUSH证书，这才算是大致理解了苹果爸爸这一整套机制，怕自己忘记，所以markdown一下。纯属个人理解，有问题请帮忙指出。  </p>
</blockquote>
<h2 id="总体介绍"><a href="#总体介绍" class="headerlink" title="总体介绍"></a>总体介绍</h2><p>本文会从实用主义的如何对一个已有的工程进行证书与PP描述文件进行配置、对一个已建立好的appid进行PUSH证书的配置以及根据个人的整理与理解，浅谈一下iOS的签名机制。  </p>
<ul>
<li>浅谈iOS签名与校验机制</li>
<li>从无到有创建一个已有项目的开发证书</li>
<li>创建项目对应的推送证书</li>
</ul>
<h2 id="浅谈iOS签名与校验机制"><a href="#浅谈iOS签名与校验机制" class="headerlink" title="浅谈iOS签名与校验机制"></a>浅谈iOS签名与校验机制</h2><p>众所周知，iOS的签名与校验机制是非常复杂又混乱，一个独立的APP从生成打包到发版，其中你会遇到以下各种概念与文件，各种证书、Provisioning Profile、CertificateSigningRequest、p12、p12、APPID等。本文是在阅读了bang大神的博客后，加上自己操作发布了一款app后对这套流程有了一个大致清晰的理解。</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在苹果的iOS系统之前，我们所熟悉的操作系统，比如linux、Windows、Mac等，都是可以直接通过下载安装包然后，双击或者其他方式去安装。这样就导致随便在哪下载了一个安装包后都能运行，导致平台很难控制盗版或者是其他恶意的传播。但是苹果对安装在iOS系统上的每个APP都有绝对的掌控权，主要就是通过这一套复杂的数字签名与校验实现的。  </p>
<h3 id="数字签名机制"><a href="#数字签名机制" class="headerlink" title="数字签名机制"></a>数字签名机制</h3><p>数字签名机制就是通过将摘要算法和非对称加密算法结合到一起实现的。<br>其中摘要算法是通过将任意长度的文本，通过一个算法（常见的有MD5、SHA等），得到一个固定长度的文本。<br>对称加密算法是通过同一份秘钥加密和解密数据，而非对称加密算法则是有两份秘钥：公钥和私钥，生成者负责生成私钥与公钥，并保存私钥，公开公钥；公钥是公开的，但不可能通过公钥反推出私钥，或者说极难反推，只能穷举，所以只要密钥足够长度，要通过穷举而得到私钥，几乎是不可能的；通过私钥加密的密文只能通过公钥解密，公钥加密的密文只有通过私钥解密。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/05/02/如何发布一个iOS全新APP-从证书管理到Jenkins任务上的archive打包上传/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/02/使用appium进行iOS真机自动化测试之环境入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/02/使用appium进行iOS真机自动化测试之环境入门/" itemprop="url">使用appium进行iOS真机自动化测试之环境入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-02T21:19:35+08:00">
                May 2 2018
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>之前刚接触客户端测试的时候，appium还是1.5，xcode还是7，那时的苹果还支持UIAutomation框架，当时的UI自动化case写的也是很顺利，后来xcode升级后，楼主试用过beta版本的1.6的appium维护之前的case，当时还没有对应的最新版的客户端，所以当时获取界面元素，楼主还是很low逼的使用打印页面的方式。后来跳槽后，新的环境并没有UI自动化这种东西，所以一直就废弃了，不过有个比较头疼的问题一直存在，核心埋点问题，埋点的异常会导致各种大盘数据的抖动，为了保证核心埋点的稳定，打算重新搞一搞appium，利用UI自动化去校验核心埋点。在重新配置appium环境的时候默默的表示还是遇到了很多坑的，所以就记录一下，给同行的tester们一点启示。</p>
</blockquote>
<h2 id="总体介绍"><a href="#总体介绍" class="headerlink" title="总体介绍"></a>总体介绍</h2><p>本文会介绍包括xcode7以及最新的xcode9的对应的appium的使用小记，不过之前版本的很多疑问点已经没有印象了，所以会着重记录新版本的appium与xcode的使用心得。之前在运行过程中，一直对WD编译成功后的一个server地址感兴趣，就在网上找的过一篇博客，博主主要从appium原理层面分析的一下appium，虽然不是非常深刻，但个人觉得值得大家读一读：<a href="https://bestswifter.com/appium/" target="_blank" rel="external">Appium 从入门到原理</a><br>本文主要分为如下几个部分：</p>
<ul>
<li>新版的appium以及相关依赖的安装</li>
<li>WebDriverAgent的安装与运行</li>
<li>Appium-Desktop安装与运行  </li>
<li>DesiredCapabilities参数设置</li>
<li>遇到的问题点记录</li>
</ul>
<h2 id="新版appium以及相关依赖安装"><a href="#新版appium以及相关依赖安装" class="headerlink" title="新版appium以及相关依赖安装"></a>新版appium以及相关依赖安装</h2><h3 id="安装必备的依赖"><a href="#安装必备的依赖" class="headerlink" title="安装必备的依赖"></a>安装必备的依赖</h3><ul>
<li><p>libimobiledevice<br>appium iOS真机调试依赖一个重要的第三方开源包：<a href="http://www.libimobiledevice.org/" target="_blank" rel="external">libimobiledevice</a>，它同iTools一样，都是可以替代iTunes，进行iOS设备管理的工具,使用Homebrew可以轻松获取并安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install libimobiledevice</div></pre></td></tr></table></figure>
</li>
<li><p>ios-deploy<br>ios-deploy是一个使用命令行安装ios app到连接的设备的工具，原理是根据os x命令行工程调用系统底层函数，获取连接的设备、查询/安装/卸载app。类似的工具有Fruitstrap，ideviceinstaller、node-ios-device等. 可以使用npm直接安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g ios-deploy</div></pre></td></tr></table></figure>
</li>
<li><p>appium安装<br>appium本质上就是一个Nodejs应用，我们可以使用npm直接进行安装，安装完毕后就可以直接命令行启动了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g appium</div></pre></td></tr></table></figure>
</li>
</ul>
<p>本地已有老版本appium时，使用上面的命令可直接更新至最新版本，或者指定版本：</p>
<ul>
<li>appium-doctor<br>appium-doctor是用来检测安装环境是否正常的命令，同样使用npm直接安装<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install appium-doctor -g</div></pre></td></tr></table></figure>
</li>
</ul>
<p>安装成功后，使用该命令可以检测安装环境：<code>appium-doctor --ios</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">➜  automaster-ios git:(UGC) appium-doctor --ios</div><div class="line">info AppiumDoctor Appium Doctor v.1.4.3</div><div class="line">info AppiumDoctor ### Diagnostic starting ###</div><div class="line">info AppiumDoctor  ✔ The Node.js binary was found at: /usr/local/bin/node</div><div class="line">info AppiumDoctor  ✔ Node version is 8.0.0</div><div class="line">info AppiumDoctor  ✔ Xcode is installed at: /Applications/Xcode.app/Contents/Developer</div><div class="line">info AppiumDoctor  ✔ Xcode Command Line Tools are installed.</div><div class="line">info AppiumDoctor  ✔ DevToolsSecurity is enabled.</div><div class="line">info AppiumDoctor  ✔ The Authorization DB is set up properly.</div><div class="line">info AppiumDoctor  ✔ Carthage was found at: /usr/local/bin/carthage</div><div class="line">info AppiumDoctor  ✔ HOME is set to: /Users/didi</div><div class="line">info AppiumDoctor ### Diagnostic completed, no fix needed. ###</div><div class="line">info AppiumDoctor</div><div class="line">info AppiumDoctor Everything looks good, bye!</div><div class="line">info AppiumDoctor</div></pre></td></tr></table></figure></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/05/02/使用appium进行iOS真机自动化测试之环境入门/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/03/基于XCUITest进行的iOSMonkey测试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/03/基于XCUITest进行的iOSMonkey测试/" itemprop="url">基于XCUITest进行的iOSMonkey测试</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-03T19:35:33+08:00">
                Nov 3 2017
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/客户端测试/" itemprop="url" rel="index">
                    <span itemprop="name">客户端测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>本文主要用于介绍由于iOS与Xcode升级，之前很多iOS端的QA同学赖以生存UIAutomation框架被无情废弃，如何基于 XCUITesting进行monkey测试 ——SwiftMonkey。其实从Xcode升级到现在也有一年多了，这个工具现在网上的介绍也开始纷呈起来，但是还是打算记录一下自己的使用过程，主要是有些地方，在网上看到的很多资料都有问题后来自己混编了Swift源码，才搞清楚，所以希望本文还是能给摸索而来的tester们一点启示。<br>源码的GitHub地址： <a href="https://github.com/zalando/SwiftMonkey" target="_blank" rel="external">https://github.com/zalando/SwiftMonkey</a></p>
</blockquote>
<h2 id="总体介绍"><a href="#总体介绍" class="headerlink" title="总体介绍"></a>总体介绍</h2><p>先大概介绍一个monkey测试，简单说就是模拟一个monkey（淘气的猴子）的一种针对APP的随机测试，基本在功能验证bug收敛阶段引入，主要用于测试APP的稳定性，一般常见的crash闪退以及卡死问题都会影响APP的稳定性。<br>本文会在之前自学iOS时写的半废弃状态的练手APP天气预报作为demo做monkeyTest，首次使用可以直接拉代码实验，代码地址：<a href="https://github.com/gysxl/WeatherRequest" target="_blank" rel="external">git@github.com:gysxl/WeatherRequest.git</a><br>总体来说，在你的项目中添加monkey测试，主要分为以下几步：  </p>
<ul>
<li>添加monkey工具源码</li>
<li>新建并配置UI testing target</li>
<li>编写测试代码</li>
<li>run monkey并分析BUG日志  </li>
<li>锦上添花添加手势记录</li>
</ul>
<h2 id="添加monkey工具源码"><a href="#添加monkey工具源码" class="headerlink" title="添加monkey工具源码"></a>添加monkey工具源码</h2><p>前言已经提到过，本文所用到的主要是一个基于 XCUITesting 框架的 monkey 工具 —— <a href="https://github.com/zalando/SwiftMonkey" target="_blank" rel="external">https://github.com/zalando/SwiftMonkey</a> ，所以首先肯定要将人家的源码down下来，PS：能翻墙最好翻个墙，干啥都能快一些，也不会遇到什么乱七八糟的错误。<br>下载下来后，需要把目录中的SwiftMonkey与SwiftMonkeyPaws文件复制到你的项目目录中，参考我下图的文件结构：<br><img src="/images/ImportCode.png" alt=""><br>然后把这两个项目的.xcodeproj拖到你的项目中，如下所示：<br><img src="/images/ImportPro.png" alt=""><br>以上代码拖入的工作就完成了，这个是比较直观的拖入操作，其实也可以通过pod集成的方式直接导入，直接通过修改pod库文件，修改部分如下（具体的根据自己的项目来调整，不过表示我还没尝试这种方法，只是先普及一下）：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">target &quot;App&quot; do   //App为自己的工程名</div><div class="line">    pod &quot;SwiftMonkeyPaws&quot;, &quot;~&gt; 1.0&quot;</div><div class="line">end</div><div class="line"></div><div class="line">target &quot;Tests&quot; do //Test为text对应的Target名</div><div class="line">    pod &quot;SwiftMonkey&quot;, &quot;~&gt; 1.0&quot;</div><div class="line">end</div></pre></td></tr></table></figure>
<p>然后通过 <code>pod install</code> 的方式集成       </p>
<h2 id="新建并配置UI-testing-target"><a href="#新建并配置UI-testing-target" class="headerlink" title="新建并配置UI testing target"></a>新建并配置UI testing target</h2><p>现在项目中添加一个新的target，依次选择file——&gt;new——&gt;target,最后选择iOS UI testing Bundle：<br><img src="/images/NewTarget.png" alt=""><br>点击next后就配置一些target的信息，这里需要注意的是，由于这个工具是用swift写的，所以需要选择的语言是Swift，其他的参考下面的配置然后根据个人的项目修改就可：<br><img src="/images/OptionsForMonkey.png" alt=""><br>配置相关的target信息：<br><img src="/images/setting1.png" alt=""><br><img src="/images/setting2.png" alt=""><br>需要注意的是，由于工具是用Swift编写的，所以需要在项目中的build setting中勾选上Swift的标准库，否则不能集成工具库，而且新建的target需要注册成功，勾选你的证书什么的注册一下就好。如下图所示：<br><img src="/images/setting3.png" alt=""><br><img src="/images/setting4.png" alt=""><br>以上就配置完成了！  </p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/11/03/基于XCUITest进行的iOSMonkey测试/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/23/闪瞎眼健身app概要设计/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/23/闪瞎眼健身app概要设计/" itemprop="url">闪瞎眼健身app概要设计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-23T14:03:34+08:00">
                Jun 23 2017
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><p>整个app提供四个主要功能：登录以及权限管理、打卡积分、查看打卡记录、积分兑换。  </p>
<h3 id="登录以及权限管理功能需求列表"><a href="#登录以及权限管理功能需求列表" class="headerlink" title="登录以及权限管理功能需求列表"></a>登录以及权限管理功能需求列表</h3><ul>
<li>健身团成员以手机号为登录账号，通过密码登录，或者通过验证码登录方式，名称使用真实姓名，便于管理员confirm申请。</li>
<li>普通团员角色，登录后可正常查看打卡记录，发起当天打卡申请，查看本人积分，查看本人兑换记录的功能。</li>
<li>管理员除了普通成员的功能外，还有confirm成员打卡申请的权限。   </li>
</ul>
<h3 id="打卡积分功能"><a href="#打卡积分功能" class="headerlink" title="打卡积分功能"></a>打卡积分功能</h3><ul>
<li>成员正常登陆后，界面显示当月的日历表格，当前日期高亮，底部显示积分数目。</li>
<li>若人员当日还未打卡，则打卡健身按钮高亮，日历当日正常显示，点击打卡健身按钮后，按钮置灰，文案显示为“等待管理员确认”（每天控制打卡次数为1次）；</li>
<li>若当日用户已打卡成功，则打卡健身按钮置灰，若此时管理员没有confirm此次打卡，则显示“等待管理员确认。。。”；</li>
<li>若当日已成功打卡，且管理员已经确认，则日历中当天日期显示小星星一枚。</li>
<li>管理员确认打卡申请后，当前用户积分加一。  </li>
</ul>
<h3 id="管理员确认功能"><a href="#管理员确认功能" class="headerlink" title="管理员确认功能"></a>管理员确认功能</h3><ul>
<li>当前成员登录后，若匹配后台为管理员角色，则轮询comfirm接口，判断是否有待确认打卡记录。  </li>
<li>若有未confirm请求，则以列表形式将待confirm信息现在在界面，主要显示用户名称，管理员选中需要确认的用户打卡申请后，通过点击列表底部的确认打卡按钮，confirm成员的打卡记录。  </li>
</ul>
<h3 id="积分兑换功能"><a href="#积分兑换功能" class="headerlink" title="积分兑换功能"></a>积分兑换功能</h3><ul>
<li>用户正常登陆后，在界面底部会显示用户当前积分，若积分大于等于5分，则对应的积分换取礼品按钮高亮。</li>
<li>点击“换取礼品”按钮后，跳转至积分商城页面</li>
<li>积分商城界面根据用户当前积分，显示可换取礼品（可选取礼品可点击，积分不足礼品置灰）</li>
<li>用户选中某礼品后，点击“确认兑换”，用户积分相应减去该礼品所需积分，并返回打卡首页。</li>
</ul>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/06/23/闪瞎眼健身app概要设计/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/13/iOS页面传值（Objective-C）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/13/iOS页面传值（Objective-C）/" itemprop="url">iOS页面传值（Objective-C）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-13T16:38:28+08:00">
                Jun 13 2017
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ObjectiveC/" itemprop="url" rel="index">
                    <span itemprop="name">ObjectiveC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/25/UITableView-基本使用方法总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/25/UITableView-基本使用方法总结/" itemprop="url">UITableView 基本使用方法总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-25T18:52:05+08:00">
                May 25 2017
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ObjectiveC/" itemprop="url" rel="index">
                    <span itemprop="name">ObjectiveC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>前言：本篇小白入门介绍是紧接着上一篇继续的，在写天气预报的练手项目时，需要画个简单的table用来选择查看城市天气详情的东东，于是简单的研究了一下iOS关于UITableView的实现，还是老规矩，废话不说，先上UITableView的实现demo：</p>
<blockquote>
<p>标注一下demo源码位置<a href="https://github.com/gysxl/UITableViewDemo.git" target="_blank" rel="external">iOS Objective-C使用UITableView实现可上下滑动table功能</a>  </p>
</blockquote>
<h2 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h2><p>简单来说，table view就是在单个列里面显示一组列表项，UITableView继承于用户可滑动表格的UIScrollView，但是需要注意的是UITableView的只允许上下滑动。每个cell中可包含的内容可以自定义，若是你只想展示单个的文本或者其他信息，则对你来说UITableView的实现就相当简单了。具体操作如下：  </p>
<h2 id="构造需要展示的数据信息"><a href="#构造需要展示的数据信息" class="headerlink" title="构造需要展示的数据信息"></a>构造需要展示的数据信息</h2><p>关于数据信息，最好在页面加载tableView之前就构造完成，我一般会写在整个页面的viewLoad方法中，具体代码如下（使用iOS自带的NSTimeZone去作为展示信息):</p>
<ul>
<li><p>声明全局变量</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">NSArray</span> *timeZoneNames;  <span class="comment">//作为传参变量</span></div></pre></td></tr></table></figure>
</li>
<li><p>构造展示信息，并赋值给全局变量  </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span> *timeZones = [<span class="built_in">NSTimeZone</span> knownTimeZoneNames];</div><div class="line"><span class="keyword">self</span>.timeZoneNames = [timeZones sortedArrayUsingSelector:<span class="keyword">@selector</span>(localizedStandardCompare:)];</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="实现tableView的一些基本方法"><a href="#实现tableView的一些基本方法" class="headerlink" title="实现tableView的一些基本方法"></a>实现tableView的一些基本方法</h2><ul>
<li><p>返回 tableview 有多少个section的方法</p>
<p>首先需要简单介绍cell与section的意义。UITableView的每一条数据对应的单元格叫做一个cell，也是UITableView的一个对象。并且我们可以分区展示UITableView，这样每个区就称为一个section，section中的每一行都从0开始编号。楼主在网上盗了一张非常清晰明了的图片，如下：<br><img src="/images/UITableView.png" alt="">  </p>
<p>介绍完毕，上干货！！！！  </p>
<p><code>- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView</code> 这个方法就是 oc 提供的用于返回tableview有多少个section的方法。设置如下：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSInteger</span>)numberOfSectionsInTableView:(<span class="built_in">UITableView</span> *)tableView</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ps:如果不实现该方法的话，默认返回一个section  </p>
</li>
<li><p>返回section中有多少个元素，也就是有几个cell   </p>
<p><code>- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section</code>这个方法主要用于返回每个section中有几个cell<br>具体设置如下：</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSInteger</span>)tableView:(<span class="built_in">UITableView</span> *)tableView numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section</div><div class="line">&#123;</div><div class="line"><span class="comment">//    return [self.array count];</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.timeZoneNames.count;<span class="comment">//用来统计需要显示的timeZoneNames的个数</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="tableview的cell的个性化定制"><a href="#tableview的cell的个性化定制" class="headerlink" title="tableview的cell的个性化定制"></a>tableview的cell的个性化定制</h2>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/05/25/UITableView-基本使用方法总结/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/25/iOS-objective-c实现定位当前城市/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/25/iOS-objective-c实现定位当前城市/" itemprop="url">iOS:objective-c实现定位当前城市</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-25T18:51:48+08:00">
                May 25 2017
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ObjectiveC/" itemprop="url" rel="index">
                    <span itemprop="name">ObjectiveC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>前言：刚开始入门iOS时，看了几天的理论知识后，就开始着手写一个简单的天气预报程序练手。过程中就遇到了首页需要根据定位出的城市获取天气的问题，于是搜索了一下获取定位相关的知识，整理如下.<br>根据个人学习是的习惯，觉得网上大神的解答最好能有个简单的demo可供参考最好，所以本人写了个简单的获取定位的demo：</p>
<blockquote>
<p>标注一下demo源码位置<a href="https://github.com/gysxl/CoreLocationDemo.git" target="_blank" rel="external">iOS Objective-C获取定位城市demo</a></p>
</blockquote>
<h2 id="导入头文件并请求授权"><a href="#导入头文件并请求授权" class="headerlink" title="导入头文件并请求授权"></a>导入头文件并请求授权</h2><ul>
<li><p>导入头文件</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;CoreLocation/CoreLocation.h&gt;</span></span></div></pre></td></tr></table></figure>
</li>
<li><p>修改info.plist  </p>
</li>
</ul>
<p>修改info.plist文件，添加获取定位行为以及配置选项。如下图：<br><img src="/images/infoplist.png" alt=""><br>可以只添加需要时使用：<code>Privacy - Location When In Use Usage Description</code></p>
<h2 id="创建位置管理者CLLocationManager，并添加到属性"><a href="#创建位置管理者CLLocationManager，并添加到属性" class="headerlink" title="创建位置管理者CLLocationManager，并添加到属性"></a>创建位置管理者CLLocationManager，并添加到属性</h2>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="built_in">CLLocationManager</span> *locationManager;</div></pre></td></tr></table></figure>
<h2 id="判断是否开启了定位服务"><a href="#判断是否开启了定位服务" class="headerlink" title="判断是否开启了定位服务"></a>判断是否开启了定位服务</h2><ul>
<li><p>在程序启动时需要先判断是否开启了定位  </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ([<span class="built_in">CLLocationManager</span> locationServicesEnabled]) &#123; <span class="comment">// 判断是否打开了位置服务</span></div><div class="line">      <span class="keyword">self</span>.locationManager = [[<span class="built_in">CLLocationManager</span> alloc] init];<span class="comment">//初始化定位器</span></div><div class="line">      [<span class="keyword">self</span>.locationManager startUpdatingLocation]; <span class="comment">// 启动定位器</span></div><div class="line">  &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>设置定位器的其他属性<br>在初始化定位器后，需要设置其delegate以及其他属性  </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ([<span class="built_in">CLLocationManager</span> locationServicesEnabled])&#123;</div><div class="line">        <span class="keyword">self</span>.locationManager = [[<span class="built_in">CLLocationManager</span> alloc] init];<span class="comment">//初始化定位器</span></div><div class="line">        <span class="keyword">self</span>.locationManager.delegate = <span class="keyword">self</span>; <span class="comment">//设置代理</span></div><div class="line">        <span class="keyword">self</span>.locationManager.desiredAccuracy = kCLLocationAccuracyBest;<span class="comment">//设置精确度</span></div><div class="line">        <span class="keyword">self</span>.locationManager.distanceFilter = <span class="number">100</span>;<span class="comment">//表明每隔100米更新一次定位信息</span></div><div class="line">        [<span class="keyword">self</span>.locationManager requestWhenInUseAuthorization];<span class="comment">//使用的是requestWhenInUseAuthorization方法</span></div><div class="line">        <span class="keyword">self</span>.currentCity = [[<span class="built_in">NSString</span> alloc] init];</div><div class="line">        [<span class="keyword">self</span>.locationManager startUpdatingLocation];<span class="comment">//启动定位器</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="监听定位信息"><a href="#监听定位信息" class="headerlink" title="监听定位信息"></a>监听定位信息</h2>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/05/25/iOS-objective-c实现定位当前城市/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/25/android客户端手动测试代码覆盖率统计/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="单晓兰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sxl.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="兰小妞滴Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/25/android客户端手动测试代码覆盖率统计/" itemprop="url">android客户端手动测试代码覆盖率统计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-25T15:50:53+08:00">
                May 25 2017
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/客户端测试/" itemprop="url" rel="index">
                    <span itemprop="name">客户端测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>本文主要介绍如何通过内置打桩的方式收集app手工测试的代码覆盖率，以便于更直观的发现测试用例的不足  </p>
</blockquote>
<h2 id="总体介绍"><a href="#总体介绍" class="headerlink" title="总体介绍"></a>总体介绍</h2><p>本文主要是用的是jacoco插件，Jacoco是一个开源的覆盖率工具，Jacoco可以嵌入到Ant 、Maven中，并提供了EclEmma Eclipse插件,也可以使用JavaAgent技术监控Java程序。很多第三方的工具提供了对Jacoco的集成，如sonar、Jenkins等。<br>官网地址：<a href="http://www.eclemma.org/jacoco/" target="_blank" rel="external">JaCoCo Java Code Coverage Library</a><br>在实际是用过程中，与个人环境相关的由于缺少某些jar包的报错，都可以上述网站中下载对应的jar包并导入。<br>本文主要以博主在实际工作中遇到的某个app为例，总体分为四个步骤：</p>
<ul>
<li>打开收集覆盖率开关，并在create函数中添加结果收集文件</li>
<li>在跑完测试case，关闭app时将结果写入收集文件</li>
<li>添加生成测试报告的task</li>
<li>将生成的覆盖文件编译生成报告</li>
</ul>
<h2 id="打开开关，并生成收集文件"><a href="#打开开关，并生成收集文件" class="headerlink" title="打开开关，并生成收集文件"></a>打开开关，并生成收集文件</h2><p>1、 添加包<br>在源码的app_instance中的build.gradle文件中，添加代码覆盖率需要依赖的编译包<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line"> <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></div><div class="line"> compile <span class="title">project</span><span class="params">(<span class="string">':framework:cupid'</span>)</span></div><div class="line"> debugCompile 'com.facebook.stetho:stetho:1.0.1'</div><div class="line"> debugCompile 'com.facebook.stetho:stetho-urlconnection:1.3.1'</div><div class="line"> debugCompile 'org.jacoco:org.jacoco.agent:0.7.6.201602180812' <span class="comment">//add by sxl for coverage</span></div><div class="line"> compile 'com.facebook.stetho:stetho:1.3.1'</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里需要注意的是，添加完编译时可以会遇到很多关于jar包依赖的报错，如下文提过的，需要手动下载jacoco相关的jar包放在本地lib库中并导入。<br>2、 打开debug中统计覆盖率开关<br>在项目正在运行的build.gradle中加入jacoco插件<br><code>apply plugin: &quot;jacoco&quot;</code><br>并修改buildType中的debug属性：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">debug &#123;</div><div class="line">minifyEnabled <span class="keyword">false</span></div><div class="line"> debuggable <span class="keyword">true</span></div><div class="line"> testCoverageEnabled <span class="keyword">true</span> <span class="comment">//add by sxl for coverage</span></div><div class="line"> minifyEnabled <span class="keyword">false</span></div><div class="line"> signingConfig signingConfigs.release</div><div class="line">ndk &#123;</div><div class="line">abiFilter <span class="string">"armeabi"</span></div><div class="line"> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>注意，如果debug中有混淆，需要把混淆去掉。<br>3、 添加收集文件<br>app启动时创建覆盖率统计coverage.ec文件<br>需要在app启动的文件（AppInstanceApplicationCallback.java）中的onCreate函数中添加如下代码：</p>
<pre><code class="java"><span class="keyword">if</span> (BuildConfig.DEBUG){
    String SDCARD_PATH = Environment.getExternalStorageDirectory().getPath();
    String DEFAULT_COVERAGE_FILE_PATH = SDCARD_PATH + <span class="string">"/coverage.ec"</span>;
    File file = <span class="keyword">new</span> File(DEFAULT_COVERAGE_FILE_PATH);
    <span class="keyword">if</span> (!file.exists()) {
        <span class="keyword">try</span> {
            file.createNewFile();
        } <span class="keyword">catch</span> (IOException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h2 id="关闭app时，收集统计的数据"><a href="#关闭app时，收集统计的数据" class="headerlink" title="关闭app时，收集统计的数据"></a>关闭app时，收集统计的数据</h2>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/05/25/android客户端手动测试代码覆盖率统计/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/sxl.png"
               alt="单晓兰" />
          <p class="site-author-name" itemprop="name">单晓兰</p>
           
              <p class="site-description motion-element" itemprop="description">学习，积累，成长</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">单晓兰</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
